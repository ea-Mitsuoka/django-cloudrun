{% load i18n static %}
<!DOCTYPE html>{% get_current_language as LANGUAGE_CODE %}
<html lang="{{ LANGUAGE_CODE|default:"en-us" }}">
<head>
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-K89JEX5BDT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-K89JEX5BDT');

    gtag('event', 'add_payment_info');
    // Promise に値を取得する
    const gclidPromise = new Promise(resolve => {
      gtag('get', 'G-K89JEX5BDT', 'gclid', resolve)
    });
    gclidPromise.then((gclid) => {
      // Do something with gclid...
      console.log(gclid)
    })

    // Measurement Protocol にイベントを送信する 
    gtag('get', 'G-K89JEX5BDT', 'client_id', (clientID) => {
      sendOfflineEvent(clientID, "tutorial_begin")
    });

    function sendOfflineEvent(clientID, eventName, eventData) {
      // Send necessary data to your server...
    }

  </script>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link rel="stylesheet" href="{% static 'cms/css/bootstrap.min.css' %}">
{% block extra_css %}{% endblock %}
<title>{% block title %}My books{% endblock %}</title>
</head>
<body>
  <div class="container">
    {% block content %}
      {{ content }}
    {% endblock %}
  </div>
<script src="{% static 'cms/js/jquery-3.5.1.min.js' %}"></script>
<script src="{% static 'cms/js/bootstrap.bundle.min.js' %}"></script>
{% block extra_js %}{% endblock %}
</body>
</html>
